var KEY_TAB=9,KEY_RETURN=13,KEY_ESC=27,KEY_UP=38,KEY_DOWN=40,KEY_SPACE=32,PrettySelector={oSelect:!1,oReplaced:!1,oToggler:!1,oTogglerDown:"icon-sel-down",oTogglerUp:"icon-sel-up",container:'<div class="search-in-replaced"><span role="button" class="search-in-toggle" tabindex="0" aria-label="Expand search-in menu"><span class="icon-sel-down"></span></span><ul data-expanded="false" aria-labelledby="keywords-in"></ul></div>',option:'<li role="button" data-section-id="0" data-option-value="all" data-selected="" tabindex="-1">Search All</li>',init:function(e){s=this,s.oSelect=$(e),s.oSelect.after($(this.container)),s.oReplaced=$(".search-in-replaced"),s.oToggler=$(".search-in-toggle"),s.oSelect.find("option").each(function(e){$(this).attr("data-section-id",e),$(".search-in-replaced").find("ul").append($(s.option).attr("data-section-id",e).attr("data-option-value",$(this).val()).attr("data-selected",$(this).is(":selected")).html($(this).html()))}),this.replaceSelectMenu(),this.handleDropDown(),this.setSelectedStatus()},replaceSelectMenu:function(){s.oSelect.hide(),s.oReplaced.show()},handleDropDown:function(){var e=this;s.oToggler.on("click keydown",function(t){return t.stopPropagation(),t.which==KEY_TAB?e.collapseReplacedMenu():t.which==KEY_RETURN?$(this).closest("form").submit():"true"==s.oToggler.next().attr("data-expanded")?e.collapseReplacedMenu():e.expandReplacedMenu()}),s.oReplaced.find("li").on("click",function(t){t.stopPropagation(),"true"==s.oToggler.next().attr("data-expanded")&&e.setSelectedStatus($(this).attr("data-section-id")),s.oToggler.trigger("click")}),s.oSelect.on("change",function(){e.setSelectedStatus()})},expandReplacedMenu:function(){var e=this;s.oToggler.next().attr("data-expanded",!0),s.oToggler.find("span").removeClass(s.oTogglerDown).addClass(s.oTogglerUp),liToFocus=s.oToggler.next().addClass("open").find("li:first"),s.oToggler.next().find("[data-selected=true]").length&&(liToFocus=s.oToggler.next().find("[data-selected=true]")),liToFocus.focus(),s.oToggler.next().off("keydown").on("keydown",function(t,o,a){switch(o=s.oToggler.next().find("li:focus"),a=s.oToggler.next().find("li").length,t.which){case KEY_DOWN:e.moveFocusDown(t,o,a);break;case KEY_UP:e.moveFocusUp(t,o,a);break;case KEY_RETURN:case KEY_SPACE:select_section_id=o.attr("data-section-id"),e.setSelectedStatus(select_section_id);case KEY_TAB:e.collapseReplacedMenu()}})},collapseReplacedMenu:function(){s.oToggler.next().removeClass("open"),s.oToggler.next().attr("data-expanded",!1),s.oToggler.find("span").removeClass(s.oTogglerUp).addClass(s.oTogglerDown),s.oToggler.focus()},setSelectedStatus:function(e){e||(e=s.oSelect.find("option:selected").attr("data-section-id")),e||(e=s.oSelect.find("option:first").attr("data-section-id")),s.oReplaced.find("ul li").attr("data-selected",!1),s.oSelect.find("option").removeAttr("selected").prop("selected",!1),s.oReplaced.find("li[data-section-id="+e+"]").focus().attr("data-selected",!0),sectionId=s.oReplaced.find("ul li[data-selected=true]").attr("data-section-id"),s.oSelect.find('option[data-section-id="'+sectionId+'"]').attr("selected","selected").prop("selected",!0)},moveFocusDown:function(e,t,o){e.preventDefault(),s.oToggler.next().find("li").index(t)>=o-1||t.next().focus()},moveFocusUp:function(e,t){e.preventDefault(),s.oToggler.next().find("li").index(t)<=0||t.prev().focus()}};
